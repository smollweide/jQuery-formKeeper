!function(){var a=!1,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,c[g]):c[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d}}();var FormKeeper=FormKeeper||{};FormKeeper.$=$,function(){"use strict";FormKeeper.Config={classDefault:"form-keeper",classSuccess:"",classError:"",classWrapSuccess:"has-success",classWrapError:"has-error",classPopover:"form-keeper__popover",templatePopover:'<div class="form-keeper__popover"><div class="popover bottom form-keeper__popover__inner"><div class="arrow"></div><p>{{title}}</p></div></div>',bindAbleExtensions:[]}}(FormKeeper.$),function(a){"use strict";FormKeeper.Utils={isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isInteger:function(a){var b=this;return b.isNumber(a)?""===a.toString().replace(/[0-9\-]*/g,""):!1},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isObject:function(a){var b=this;return"object"==typeof a&&!b.isNull(a)&&!b.isArray(a)},isFunction:function(a){return"function"==typeof a},isArray:function(a){return a instanceof Array},isTagName:function(a,b){return a.prop("tagName").toLowerCase()===b.toLowerCase()},isMandatoryCase:function(a){var b=this;return b.isUndefined(a)||b.isNull(a)||""===a},console:function(a,b){var c=this;return c.isObject(console)?(console[a](b),!0):!1},replace:function(b,c){var d=this;return d.isString(b)?d.isObject(c)?(a.each(c,function(a,c){var d=new RegExp("{{"+a+"}}","g");b=b.replace(d,c)}),b):b:""},isValidExtension:function(a){var b,c=this;return c.isString(a)?(b=c.capitalize(a),void 0!==FormKeeper.Extension[b]?!0:(c.console("warn","FormKeeper.Utils.isValidExtension: the Class FormKeeper.Extension."+b+" is undefined"),!1)):!1},toLeadingNull:function(a){var b=this;return""===a?null:(b.isString(a)&&(a=parseInt(a,10)),!b.isNumber(a)||isNaN(a)?null:9>=a&&a>=0?"0"+a:0>a&&a>=-9?"-0"+-1*a:a.toString())},capitalize:function(a){return a.substr(0,1).toUpperCase().concat(a.substr(1))},getUniqueId:function(){return(new Date).getTime()},getSelectorIdentifier:function(a){var b,c=this,d=a.attr("name");return c.isUndefined(d)?(b=a.attr("id"),c.isUndefined(b)?c.getUniqueId():b):d}}}(FormKeeper.$),function(a){"use strict";FormKeeper.Extension={},FormKeeper.Core=Class.extend({utils:FormKeeper.Utils,init:function(b,c){var d=this;return 1!==b.length?!1:(d.$form=b,d.options=a.extend({},FormKeeper.Config,c),!0)},bind:function(){var b=this,c="input."+b.options.classDefault+", textarea."+b.options.classDefault;return a(c,b.$form).on("change",function(){var c=a(this);b.validateInputDefault(c)}),b.$form.on("blur.formKeeper",c,function(){b.validateInput(a(this))}).on("focus.formKeeper",c,function(){var c=a(this);b.validateInputDefault(c)}).on("click.formKeeper","."+b.options.classPopover,function(){a(this).siblings(c).trigger("focus")}).on("click.formKeeper","a[data-form-keeper-suggestion]",function(){var c=a(this);c.closest("."+b.options.classWrapError).find("."+b.options.classDefault).val(c.data("form-keeper-suggestion"))}),b.bindBindAble(),this},bindBindAble:function(){var b=this;return a.each(FormKeeper.Config.bindAbleExtensions,function(){var a=this;return b.utils.isValidExtension(a)?((new FormKeeper.Extension[a]).bind(b,b.$form),!0):!0}),this},unbind:function(){var a=this;return a.$form.off("blur.formKeeper").off("focus.formKeeper").off("click.formKeeper"),this},unbindTypeAHeadEvent:function(a){return a.off("keypress.formKeeper.typeAHead"),this},validate:function(){var b=this,c=a("."+b.options.classDefault,b.$form),d={},e=0;return a.each(c,function(){var c=a(this),f=b.validateInput(c),g={$selector:c,invalidKeys:f};0===f.length?g.valid=!0:(g.valid=!1,e+=1),d[b.utils.getSelectorIdentifier(c)]=g}),0===e&&b.utils.isFunction(b.options.success)?b.options.success.call(b,d):b.utils.isFunction(b.options.error)&&b.options.error.call(b,d),this},bindTypeAHeadEvent:function(b,c){var d=this,e=d.options.typeAHead,f=100,g=e.delay,h=null,i=function(){0>=g&&(clearInterval(h),c())},j=function(){g-=f,i()},k=function(){g=e.delay,clearInterval(h),h=setInterval(j,f)};return d.unbindTypeAHeadEvent(b),b.on("keypress.formKeeper.typeAHead",function(){var b=a(this).val();return b.length>=e.minLength&&k(),this}),this},validateInput:function(b){var c=this,d=b.data("form-keeper"),e=[];return 1!==b.length?e:c.utils.isObject(d)?(a.each(d,function(a){if(!c.utils.isValidExtension(a))return!0;var d,f=c.utils.capitalize(a),g=new FormKeeper.Extension[f];return d=g.validateSelector(b),c.utils.isObject(d)?(d.valid||e.push({key:a,extension:g,invalidObject:d}),!0):(c.utils.console("warn",'result of an validation must be an object like {"valid": true}'),!0)}),0===e.length?(c.validateInputSuccess(b),e):(c.validateInputError(b,e),e)):e},validateInputSuccess:function(a){var b=this;return b.validateInputDefault(a),a.addClass(b.options.classSuccess).removeClass(b.options.classError),a.parent().addClass(b.options.classWrapSuccess).removeClass(b.options.classWrapError),this},validateInputDefault:function(a){var b=this;return a.removeClass(b.options.classSuccess).removeClass(b.options.classError),a.parent().removeClass(b.options.classWrapSuccess).removeClass(b.options.classWrapError),a.siblings("."+b.options.classPopover).remove(),this},validateInputError:function(b,c){var d,e,f,g=this,h=b.data("form-keeper"),i=c[0];return g.validateInputDefault(b),b.addClass(g.options.classError).removeClass(g.options.classSuccess),b.parent().addClass(g.options.classWrapError).removeClass(g.options.classWrapSuccess),g.utils.isObject(i.invalidObject)?(d=i.key,e=i.extension,g.utils.isValidExtension(d)?(g.utils.isUndefined(h[d].customMessage)?(f=g.getTitleByErrorType(e,i.invalidObject.type),f+=g.getTitleBySuggestion(e,h[d],i.invalidObject.suggestion)):f=h[d].customMessage,g.setTitle(b,f,a.extend(e.options,h[d])),this):this):this},setTitle:function(a,b,c){var d=this,e=d.utils.replace(b,c);return a.after(d.utils.replace(d.options.templatePopover,{title:e})),this},getTitleBySuggestion:function(a,b,c){var d="";return this.utils.isUndefined(c)||(b.suggestion=c,d=a.errorMessage.suggestion),d},getTitleByErrorType:function(a,b){var c=this,d="";return d=c.utils.isUndefined(b)?a.errorMessage["default"]:a.errorMessage[b]}})}(FormKeeper.$),function(a){"use strict";a.fn.formKeeper=function(b,c){var d,e=a(this),f={};return"typeahead"===b?(d="object"==typeof c?new FormKeeper.Core(e,c):new FormKeeper.Core(e,f),d.unbind().bind(),this):"object"==typeof b?(d=new FormKeeper.Core(e,b),d.validate(),this):this}}(jQuery);